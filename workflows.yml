# Input used by make_workflows.py to generate .github/workflows/

# See VersionFlavor in the script to see how stabl/release/devel/devel_release
# are defined.

software:
    ergo:
        name: Ergo
        repository: ergochat/ergo
        refs:
            stable: irctest_stable
            release: stable
            devel: master
            devel_release: null
        path: ergo
        prefix: ~/go
        pre_deps:
            - uses: actions/setup-go@v2
              with:
                  go-version: '^1.18.0'
            - run: go version
        separate_build_job: false
        build_script: |
            cd $GITHUB_WORKSPACE/ergo/
            make build
            make install
    limnoria:
        name: Limnoria
        separate_build_job: false
        install_steps:
            stable:
                - name: Install dependencies
                  run: pip install limnoria==2022.03.17 cryptography pyxmpp2-scram
            release:
                - name: Install dependencies
                  run: pip install limnoria cryptography pyxmpp2-scram
            devel:
                - name: Install dependencies
                  run: pip install git+https://github.com/ProgVal/Limnoria.git@testing cryptography pyxmpp2-scram
            devel_release: null

tests:
    ergo:
        software: [ergo]

    limnoria:
        software: [limnoria]
